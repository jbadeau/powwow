<html>
<!--

        Copyright 2006-2009 OpenAjax Alliance

        Licensed under the Apache License, Version 2.0 (the "License"); 
        you may not use this file except in compliance with the License. 
        You may obtain a copy of the License at
        
                http://www.apache.org/licenses/LICENSE-2.0

        Unless required by applicable law or agreed to in writing, software 
        distributed under the License is distributed on an "AS IS" BASIS, 
        WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. 
        See the License for the specific language governing permissions and 
        limitations under the License.
-->
<title>OpenAjax Metadata Overview</title>
<head>
<style type="text/css">
h1 { text-align:center; }
</style>
</head>
<body>
<p style='text-align:center'><img style="height:5em" src="images/OpenAjaxAllianceBanner.jpg"/></p>
<h1>OpenAjax Metadata Overview</h1>

<p>OpenAjax Metadata is an industry standard XML grammar for Ajax metadata
which targets two primary workflows:</p>

<h3>Target 1: Ajax IDEs</h3>
<p>Today, Ajax tooling falls short of potential, 
in large part due to interoperability problems. 
There are more than 10 Ajax IDEs today and hundreds of Ajax libraries (aka JavaScript libraries), 
but only on an exceptional basis do Ajax IDEs work well will JavaScript libraries,
particularly due to one-off coordination between a particular Ajax IDE and a 
particular JavaScript library.</p>

<p>OpenAjax Metadata promotes plug-and-play between Ajax IDEs and Ajax libraries by defining
a standard XML grammar for the following:</p>

<ul>
<li><strong>JavaScript APIs</strong> - 
	Descriptive information about the namespaces, classes, methods, parameters, properties, etc. 
	found in JavaScript libraries. 
	This API metadata can be used by Ajax IDEs to deliver content-assist features and interactive help.</li>
<li><strong>Widgets</strong> - 
	XML metadata, along with wrapper HTML and JavaScript, for the UI controls found in many Ajax libraries. 
	This widget metadata can be used by Ajax IDEs to populate widget palettes and to allow visual layout of Ajax applications.</li>
</ul>

<h3>Target 2: Mashups and Widgets (focusing on Secure Mashups)</h3>

<p>OpenAjax Alliance has developed two technologies in parallel to address the two major challenges
to fulfilling to promise of mashups, particularly Enterprise Mashups, where security concerns
are paramount:</p>

<ul>
<li><strong>OpenAjax Hub 2.0</strong> - 
	<a href="http://www.openajax.org/member/wiki/OpenAjax_Hub_2.0_Specification">OpenAjax Hub 2.0</a>
	specifies industry standard APIs for a secure mashup runtime 
	that runs in today's browsers and that has a forward-looking architecture for future browsers. 
	In addition to the Hub 2.0 specification which defines standard APIs,
	OpenAjax Alliance is also producing a commercial-grade open source reference implementation
	of Hub 2.0.</li>
<li><strong>OpenAjax Metadata</strong> - In coordination with Hub 2.0, OpenAjax Alliance is defining
	<a href="http://www.openajax.org/member/wiki/OpenAjax_Metadata_1.0_Specification">OpenAjax Metadata</a> for Widgets.</li>
</ul>

<p>These two initiatives help the industry realize the potential of 
mashup technologies to enable user-generated situational applications, 
where applications are assembled in the browser by end users by dragging various widgets 
onto a canvas and connecting widgets together. 
These initiatives address the two main inhibitors to widespread deployment of mashups:

<ul>
<li><strong>Mashup security</strong> - The main goal with user mashups is to allow users
to discover and use 3rd party widgets within a composite application. Most 3rd party widgets
are trustworthy, but malicious widgets will exist and there are significant security
risks with mashups since widgets are assembled together within the same Web page.
A poorly designed mashup environment might allow malicious widgets to gain access to
user confidential or company confidential information, or leverage the user's 
credentials to extract and modify information in company databases. OpenAjax Hub 2.0
addresses these security issues by isolating widgets into "sandboxes" (usually using IFRAMEs) where widgets
can only communicate with each other over a managed message bus. Widgets can only receive and send
messages that are allowed by the security manager component.</li>
<li><strong>Widget interoperability</strong> - Today there are dozens of formats
for Web Widgets, including OpenSocial Gadgets, Apple Dashboard Widgets, 
Vista Gadgets, and Yahoo Confabulator widgets. 
<a href="http://www.openajax.org/member/wiki/OpenAjax_Metadata_1.0_Specification">OpenAjax Metadata</a> for Widgets
defines an industry standard for Web Widgets for use in mashups.</li>
</ul>

<h3>Working Together: OpenAjax Hub 2.0 and OpenAjax Metadata</h3>

<p>OpenAjax Hub 2.0 and OpenAjax Metadata were designed in coordination to ensure that
the Web Widgets defined using OpenAjax Metadata would have the required information
necessary to allow those widgets to be used conveniently within a secure mashup framework
that is built on top OpenAjax Hub 2.0.</p>

<h3>A Single Widget for Multiple Application Scenarios</h3>

<p>One of the design goals with OpenAjax Metadata was that there would be a single
widget format that covered both the UI controls defined within Ajax libraries
and the Web Widgets that are used in mashups. By unifying the industry around
a single widget standard, mashup users will be able to include lower-level
UI controls found in Ajax libraries (e.g., tree widgets, grid widgets, combo boxes, calendars)
within their mashups, thereby enabling greater choice and flexibility.</p>

<h3>Compatibility with OpenSocial Gadgets and W3C Widgets</h3>

<p>OpenAjax Alliance has a policy to work in coordination with other standards initiatives
and to take into account existing industry practice. Because of the strong
momentum around OpenSocial Gadgets in the industry, along with the high-quality of the
technologies within OpenSocial Gadgets, the OpenAjax Metadata specification has been designed
purposely to align closely with OpenSocial Gadgets. In fact, OpenAjax Metadata adopts
the localization technologies from OpenSocial Gadgets. 
Regarding W3C Widgets, which focuses on a different flavor of
"widgets" (i.e., installable desktop widgets, particularly for mobile phones),
OpenAjax Alliance has coordinated with the W3C Widgets effort to ensure that the
two initiatives were in sufficient alignment that many widget developers would have the 
option of building a single source tree for a particular widget which
could then go through a simple assembly process to allow that widget to be used
either as a Web Widget within a mashup (by packaging up in OpenAjax Metadata)
or as an installable desktop widget (by packaging up as a W3C Widget).</p>

<h3>Sample OpenAjax Metadata files</h3>

<h4>Sample API Metadata</h4>
<p>The following is a sample OpenAjax Metadata file that describes the JavaScript APIs
found within a particular JavaScript file. The example below was produced by
the alliance's open source project that converts JSDoc-style inline comments
into OpenAjax Metadata.</p>

<pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;api xmlns="http://openajax.org/metadata" version="1.0"&gt;
	&lt;description&gt;
	&lt;![CDATA[
		&lt;p&gt;OpenAjax Metadata output module for the JSDoc Toolkit. 
		...
	]]&gt;
	&lt;/description&gt;
	&lt;author name="Members of OpenAjax Alliance"/&gt;
	&lt;globals&gt;
		&lt;method name="publish"&gt;
			&lt;description&gt;
				Main routine for generating OpenAjax Metadata.
				Command line arguments tell the JSDoc Toolkit
				to use the "openajax" template.
				JSDoc Toolkit then loads "publish.js" from the 
				template folder and calls
				publish() to cause output generation.
			&lt;/description&gt;
			&lt;parameter name="symbolSet" datatype="Object" usage="required"&gt;
				&lt;description&gt;
					Pointer to the top of JSDoc toolkit 
					internal data structure
				&lt;/description&gt;
			&lt;/parameter&gt;
		&lt;/method&gt;
		&lt;!-- ... --&gt;
	&lt;/globals&gt;
	&lt;namespace name="OpenAjax"&gt;
		&lt;description&gt;
			OpenAjax Alliance's namespace.
		&lt;/description&gt;
	&lt;/namespace&gt;
	&lt;class name="OpenAjax.JSDoc"&gt;
		&lt;constructor&gt;
			&lt;description&gt;
				Constructor for JSDoc class
			&lt;/description&gt;
		&lt;/constructor&gt;
		&lt;method name="finish_element"&gt;
			&lt;description&gt;
			&lt;![CDATA[
				Called after all attributes have been placed 
				onto the start tag
				and after there is a string which holds all 
				of the element's child elements.
				...
			]]&gt;
			&lt;/description&gt;
			&lt;parameter name="tagname" datatype="String" usage="required"&gt;
				&lt;description&gt;
					Tagname for this element
				&lt;/description&gt;
			&lt;/parameter&gt;
			&lt;parameter name="children" datatype="String" usage="required"&gt;
				&lt;description&gt;
					String holding all of the element's children
				&lt;/description&gt;
			&lt;/parameter&gt;
			&lt;parameter name="indent" datatype="Number" usage="required"&gt;
				&lt;description&gt;
					Current indent level for pretty printing
				&lt;/description&gt;
			&lt;/parameter&gt;
		&lt;/method&gt;
		&lt;!-- ... --&gt;
	&lt;/class&gt;
&lt;/api&gt;
</pre>

<h4>Sample Widget Metadata</h4>
<p>The following is a sample OpenAjax Metadata file that describes the
sample calendar widget.</p>

<pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;widget name="Calendar" id="http://openajax.org/2008_InteropFest/widgets/calendar"
		spec="0.1b" jsClass='Calendar' sandbox='true'
		xmlns="http://openajax.org/metadata"&gt;

    &lt;library name='dojo' version='1.1' copy='false'&gt;
      &lt;require type="css" src="../../lib/dojo/dojo/resources/dojo.css"/&gt;
      &lt;require type="css" src="../../lib/dojo/dijit/themes/tundra/tundra.css"/&gt;
    &lt;/library&gt;
    &lt;require type="javascript" src="calendar.js"/&gt;

    &lt;properties&gt;
      &lt;property name='date' datatype='Date' default="" sharedAs='date'/&gt;
    &lt;/properties&gt;

    &lt;content type='fragment'&gt;
    &lt;![CDATA[
        &lt;input ID="__WID___calendar" class='tundra' lang="en-us"
		style="background-color:#f5f5f5" dojoType="dijit._Calendar"/&gt;
    ]]&gt;      
    &lt;/content&gt;
    
    &lt;javascript location="atEnd"&gt;
        this.init();
    &lt;/javascript&gt;
&lt;/widget&gt;
</pre>

<p>Notes on the above widget:</p>
<ul>
<li>The <code>&lt;content&gt;</code> element contains the HTML snippet that is displayed to the user.</li>
<li>The <code>&lt;javascript&gt;</code> element contains supplemental JavaScript logic that can help customize
and control the widget and manage the dynamic and interactive aspects of the widget.
Note that OpenAjax Metadata has multiple mechanisms for including JavaScript logic
within a widget. One of these other techniques can be seen near the top of the file with the
<code>&lt;require type="javascript" src="calendar.js"/&gt;</code> statement.</li>
<li>The <code>&lt;library&gt;</code> and <code>&lt;require&gt;</code> elements define the assets that the widget requires
in order to run. This information allows the IDE or the mashup framework to know which files to
copy into the widget's deployment area for successful execution.</li>
<li>The <code>&lt;properties&gt;</code> and <code>&lt;property&gt;</code> elements define properties that should be
displayed to the user within property editor dialogs. Selected properties can be shared with
other widgets via 'publish' or 'subscribe' attributes. For example, the Calendar widget
publishes a 'date' message so that other widgets can subscribe to that message and be notified
whenever the user clicks on a new date within the calendar widget. (Note: Not shown in the
above example is the alternate syntax for identifying messages that are published or subscribed,
the <code>&lt;topics&gt;</code> and <code>&lt;topic&gt;</code> elements, which are meant to identify those things that
are more naturally defined as a topic/event rather than as a property.</li>

  
</body>
</html>
